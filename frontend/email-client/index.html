<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Composer - AI email that drafts and manages your mailbox</title>

    <link rel="icon" href="/favicon.ico" />

    <meta name="description" content="AI webmail that triages your inbox, summarizes threads, drafts replies, schedules meetings, pulls historical context, and ensures follow-up." />
    <!-- <link rel="canonical" href="https://your-domain.example/" /> -->

    <meta name="application-name" content="Composer" />
    <meta name="apple-mobile-web-app-title" content="Composer" />
    <meta name="theme-color" content="#0B0B0E" />

    <!-- Open Graph and Twitter Card metadata handled by Thymeleaf layout in production -->
    <!-- The following are dev-only placeholders with relative URLs for Vite development -->
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="Composer" />
    <meta property="og:title" content="Composer - AI email that drafts and manages your mailbox" />
    <meta property="og:description" content="AI webmail that triages your inbox, summarizes threads, drafts replies, schedules meetings, pulls historical context, and ensures follow-up." />
    <meta property="og:image:type" content="image/png" />
    <meta property="og:image:alt" content="Composer UI showing AI triage labels, thread summary, and one-click reply suggestions." />
    <meta property="og:image:width" content="1900" />
    <meta property="og:image:height" content="1000" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Composer - AI email that drafts and manages your mailbox" />
    <meta name="twitter:description" content="AI webmail that triages your inbox, summarizes threads, drafts replies, schedules meetings, pulls historical context, and ensures follow-up." />
    <meta name="twitter:image:alt" content="Composer UI showing AI triage labels, thread summary, and one-click reply suggestions." />
    <!-- <meta name="twitter:site" content="@williamcallahan"> -->
    <!-- <meta name="twitter:creator" content="@williamcallahan"> -->

    <script src="https://cdn.jsdelivr.net/npm/marked@11.1.1/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.8/dist/purify.min.js"></script>
    <script>
      window.Composer = window.Composer || {};
      window.Composer.renderMarkdown = function (markdown) {
        try {
          const raw = marked.parse(markdown || '', { breaks: true, gfm: true });
          return DOMPurify.sanitize(raw, {
            ALLOWED_TAGS: ['p','br','strong','em','u','h1','h2','h3','h4','h5','h6','ul','ol','li','a','code','pre','blockquote','table','thead','tbody','tr','th','td','hr','div','span','img'],
            ALLOWED_ATTR: ['href','title','target','rel','class','src','alt','width','height','loading','decoding','style']
          });
        } catch (e) { return ''; }
      }
      window.Composer.escapeHtml = function (text) { const d = document.createElement('div'); d.textContent = text || ''; return d.innerHTML; }
      window.__EMAIL_CLIENT_BOOTSTRAP__ = { uiNonce: null, messages: [], aiFunctions: null };
    </script>
    <style> body{background:linear-gradient(180deg,#f8fafc 0%,#f5f5f7 100%);} </style>
  </head>
  <body>
    <div id="email-client-root"></div>
    <!-- Load EmailRenderer before the app to preserve iframe isolation API (served from Spring Boot static resources) -->
    <script src="/js/email-renderer.js"></script>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
