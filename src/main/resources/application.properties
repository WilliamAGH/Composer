# Server Configuration
server.port=${PORT:8080}
server.address=0.0.0.0
# server.servlet.context-path=/api

# Application Configuration
spring.application.name=composerai-api

# Optional dotenv-style imports (loaded if present). Environment variables still take precedence.
spring.config.import=optional:file:.env,optional:file:.env.local,optional:file:.env.properties,optional:file:.env.local.properties

# ==========================================
# OpenAI Configuration
# Source of Truth: Defaults in OpenAiProperties.java
# Override via environment variables as needed
# ==========================================

# API Credentials (required)
openai.api.key=${OPENAI_API_KEY}
openai.api.base-url=${OPENAI_API_BASE_URL}

# Chat Model (default: o4-mini)
openai.model.chat=${OPENAI_MODEL}

# Embedding Model (default: text-embedding-3-small)
openai.embedding.model=${OPENAI_EMBEDDING_MODEL}

# Streaming Configuration (defaults: 120s timeout, 10s heartbeat)
openai.stream.timeout-seconds=${OPENAI_STREAM_TIMEOUT}
openai.stream.heartbeat-interval-seconds=${OPENAI_STREAM_HEARTBEAT}

# Reasoning Configuration (defaults: o1,o3,o4,gpt-5 / minimal)
openai.reasoning.supported-model-prefixes=${OPENAI_REASONING_MODELS}
openai.reasoning.default-effort=${OPENAI_REASONING_EFFORT}

# Intent Analysis (defaults: question / 10 tokens / standard categories)
openai.intent.default-category=${OPENAI_INTENT_DEFAULT}
openai.intent.max-output-tokens=${OPENAI_INTENT_MAX_TOKENS}
openai.intent.categories=${OPENAI_INTENT_CATEGORIES}

# Request Defaults (defaults: 5 results / 4000 chars / thinking off)
openai.defaults.max-search-results=${OPENAI_MAX_SEARCH_RESULTS}
openai.defaults.max-message-length=${OPENAI_MAX_MESSAGE_LENGTH}
openai.defaults.thinking-enabled=${OPENAI_THINKING_ENABLED}

# System Prompts (defaults in OpenAiProperties.java)
openai.prompts.email-assistant-system=${OPENAI_PROMPT_EMAIL}
openai.prompts.intent-analysis-system=${OPENAI_PROMPT_INTENT}

# ==========================================
# Error Messages (defaults in ErrorMessagesProperties.java)
# ==========================================
messages.openai.misconfigured=${MESSAGES_OPENAI_MISCONFIGURED}
messages.openai.unavailable=${MESSAGES_OPENAI_UNAVAILABLE}
messages.chat.processing-error=${MESSAGES_CHAT_ERROR}
messages.stream.error=${MESSAGES_STREAM_ERROR}
messages.stream.timeout=${MESSAGES_STREAM_TIMEOUT}

# Qdrant Configuration
qdrant.enabled=${QDRANT_ENABLED:false}
qdrant.host=${QDRANT_HOST:localhost}
qdrant.port=${QDRANT_PORT:6333}
qdrant.use-tls=${QDRANT_USE_TLS:false}
qdrant.collection-name=${QDRANT_COLLECTION_NAME:emails}
qdrant.api-key=${QDRANT_API_KEY:}

# Logging Configuration
logging.level.com.composerai.api=DEBUG
logging.level.root=INFO

# CORS
app.cors.allowed-origins=${APP_CORS_ALLOWED_ORIGINS:http://localhost:8080}