# Server Configuration
server.port=${PORT:8080}
server.address=0.0.0.0
# server.servlet.context-path=/api

# Application Configuration
spring.application.name=composerai-api

# Optional dotenv-style imports (loaded if present). Environment variables still take precedence.
spring.config.import=optional:file:.env,optional:file:.env.local,optional:file:.env.properties,optional:file:.env.local.properties

# ==========================================
# OpenAI Configuration - Single Source of Truth
# ==========================================

# API Credentials
openai.api.key=${OPENAI_API_KEY:your-openai-api-key}
openai.api.base-url=${OPENAI_API_BASE_URL:https://api.openai.com/v1}

# Chat Model Configuration
openai.model.chat=${OPENAI_MODEL:o4-mini}

# Embedding Model Configuration
openai.embedding.model=${OPENAI_EMBEDDING_MODEL:text-embedding-3-small}

# Streaming Configuration
openai.stream.timeout-seconds=${OPENAI_STREAM_TIMEOUT:120}
openai.stream.heartbeat-interval-seconds=${OPENAI_STREAM_HEARTBEAT:10}

# Reasoning/Thinking Configuration
openai.reasoning.supported-model-prefixes=o1,o3,o4,gpt-5
openai.reasoning.default-effort=${OPENAI_DEFAULT_REASONING_EFFORT:minimal}

# Intent Analysis Configuration
openai.intent.default-category=question
openai.intent.max-output-tokens=${OPENAI_INTENT_MAX_TOKENS:10}
openai.intent.categories=search, compose, summarize, analyze, question, or other

# Request Defaults
openai.defaults.max-search-results=${OPENAI_MAX_SEARCH_RESULTS:5}
openai.defaults.max-message-length=${OPENAI_MAX_MESSAGE_LENGTH:4000}
openai.defaults.thinking-enabled=${OPENAI_THINKING_ENABLED:false}

# System Prompts (multiline support with backslash continuation)
openai.prompts.email-assistant-system=You are ComposerAI, a helpful email analysis assistant. \
  Use the provided email context strictly as evidence. \
  Respond with the level of detail the user's request requiresâ€”summaries when asked, \
  but thorough explanations and specifics when the question calls for them.

openai.prompts.intent-analysis-system=Analyze the user's intent and classify it into one of these categories: {categories}. \
  Respond with just the category name.

# Qdrant Configuration
qdrant.enabled=${QDRANT_ENABLED:false}
qdrant.host=${QDRANT_HOST:localhost}
qdrant.port=${QDRANT_PORT:6333}
qdrant.use-tls=${QDRANT_USE_TLS:false}
qdrant.collection-name=${QDRANT_COLLECTION_NAME:emails}
qdrant.api-key=${QDRANT_API_KEY:}

# Logging Configuration
logging.level.com.composerai.api=DEBUG
logging.level.root=INFO

# CORS
app.cors.allowed-origins=${APP_CORS_ALLOWED_ORIGINS:http://localhost:8080}